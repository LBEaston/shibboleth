
rand:
    push{lr, r4, r5, r6}
    m32 r4, RANDOM_2048
    m32 r5, RAND_INDEX

    ldr r6, [RAND_INDEX]
    lsl r6, #2
    add r4, r6
    ldr r0, [r4]
    lsr r6, #2
    add r6, #1
    cmp r6, #2048
    moveq r6, #0
    str r6, [r5]
    pop {pc, r4, r5, r6}
rand_2048:
    push{lr, r4, r5, r6}
    m32 r4, RANDOM_2048
    m32 r5, RAND_INDEX

    ldr r6, [RAND_INDEX]
    lsl r6, #2
    add r4, r6
    ldr r0, [r4]
    lsr r6, #2
    add r6, #1
    cmp r6, #2048
    moveq r6, #0
    str r6, [r5]
    pop {pc, r4, r5, r6}
RAND_INDEX:
    dw 0

RANDOM_2048: dw -1723, -530 , -742 , 1654 , 1213 , -735 , -349 , -1816, 1822 , -1294, 1443 , -875 , -952 , 873  , -1243, 1472 , -1823, 330  , -1079, 1063 , -978 , -652 , 1509 , -1581, 2037 , 1952 , 386  , -649 , -537 , 1299 , 742  , -1215, 229  , 1289 , 710  , 2036 , -1633, -1333, 1654 , -416 , 172  , -1297, -1254, -1339, 1363 , -242 , -949 , -976 , -1291, 1863 , -979 , 65   , 582  , -1699, 788  , 1720 , -1398, -2011, 1183 , -667 , 1088 , -546 , -980 , 675  , -229 , 1502 , 1061 , 482  , -1268, -220 , 787  , -115 , 1827 , 1681 , -1326, 962  , 1763 , -1086, -1697, 1151 , -1657, 616  , 411  , -1326, 238  , -1298, -541 , 179  , -1874, 1972 , -1991, 503  , 1106 , 1127 , 1605 , 922  , -1370, 874  , 1810 , -836 , 265  , -1403, 1562 , -930 , -994 , -1238, 2048 , -1137, -1113, -633 , 17   , -808 , 120  , -385 , 1117 , -1583, -1238, -932 , -2013, 1759 , -1174, 941  , 385  , 1252 , -644 , 1290 , 366  , 1251 , 1938 , -30  , -781 , -1873, -1763, 613  , 1907 , -618 , -1278, -380 , -616 , -371 , 852  , -950 , 458  , -1425, 367  , -1200, -255 , -2001, 1604 , 335  , -2022, 1053 , -450 , -700 , 69   , -1745, -737 , -1125, 1930 , -306 , 897  , 5    , -1600, 473  , 1334 , 884  , 1481 , -893 , -1014, -1810, -1760, 13   , -1492, 839  , 89   , 1980 , 1082 , -1610, 325  , 628  , 1092 , -962 , 740  , 1428 , 509  , -476 , 1342 , 1824 , 1790 , 393  , -1408, 1060 , -2012, -534 , -1028, -1659, -1599, -1730, 58   , -784 , 2009 , -1359, 1097 , 268  , -1798, -200 , 263  , -1241, 1142 , 1540 , 1061 , -86  , 543  , 1311 , 606  , -1875, -1890, -543 , -204 , 1956 , 1611 , -1416, 893  , -50  , -1983, -684 , -1422, -1777, 1063 , -877 , -2034, -859 , 719  , 607  , -1239, 580  , 459  , 1275 , 1076 , -1090, -1853, 343  , -1924, 1030 , 400  , 1137 , -1592, -1407, 1440 , -516 , -513 , -339 , 701  , 924  , -1985, 1193 , 170  , -940 , -613 , 349  , -764 , 804  , -1506, 697  , 381  , -2021, -229 , 142  , 785  , -515 , 1469 , -1379, 220  , -1892, 1846 , 57   , 1774 , -809 , 990  , 224  , 1064 , 1228 , -1442, 838  , -205 , -556 , -835 , -1671, -1263, 166  , 551  , 689  , 694  , -295 , 1092 , 1620 , -1705, 586  , 1462 , -1364, 1025 , -534 , -1334, 1786 , -718 , 1525 , 1054 , -971 , -1506, -47  , 895  , -886 , -1595, -1566, 1766 , 998  , 1539 , -1152, -1514, 1155 , 282  , -1929, -1807, 431  , -1234, 148  , -1801, -888 , -1743, -1272, 628  , 1627 , 1785 , -1593, 857  , -55  , -1188, 1447 , -1905, -1133, 795  , 1795 , 1873 , 124  , -324 , -1911, 1447 , 669  , 1144 , 1271 , -350 , -1186, -1336, 1349 , -867 , -1385, 1373 , 584  , 730  , 463  , 681  , -1831, -2020, -320 , -368 , 727  , 1489 , -175 , -1448, 1478 , -1040, 926  , 1332 , -1819, -1696, 1037 , -1820, 1461 , -73  , 163  , -788 , 121  , 672  , 1383 , 739  , 183  , 1947 , 175  , -559 , -119 , -1340, -105 , -1224, -1301, 455  , 920  , 880  , -533 , 1902 , -91  , 453  , 928  , 904  , -724 , 1554 , -1227, -1072, 153  , -352 , 499  , 1643 , -757 , -1810, -1   , 683  , -836 , -1038, 1487 , -1125, -792 , -1966, -321 , 48   , 1470 , 13   , 617  , 435  , -1876, 97   , 387  , 865  , 263  , 762  , -2016, -419 , -229 , 539  , -1267, -1322, 410  , -1960, -755 , -1587, -1074, -935 , -788 , 602  , 1090 , 993  , -1303, 1713 , -574 , -166 , 1008 , 1024 , -914 , -1089, 174  , 1142 , -99  , -691 , 188  , -738 , 1962 , -1794, -1433, 932  , 1938 , -1425, -855 , -47  , 1374 , 353  , 1991 , 260  , -1178, -1310, -1246, 1501 , -1060, -1483, -1977, 560  , -733 , -580 , 1269 , 179  , 563  , -1879, -1956, -190 , -1979, -1333, 1671 , -1142, -1560, 644  , -1725, 102  , 2001 , -157 , 1822 , -1651, 1516 , 304  , -1459, -1628, 574  , 1285 , 1210 , -687 , -787 , -986 , -855 , -667 , 720  , 1083 , -644 , -1749, -834 , 923  , 227  , 1500 , 104  , -577 , 968  , -141 , 1589 , 1703 , -22  , -1824, 1103 , 419  , -833 , 1056 , 941  , 1408 , -766 , 1202 , -345 , -1544, -924 , 1252 , 956  , 1743 , -833 , 527  , -1565, -1481, 1354 , -657 , -1   , 41   , 1407 , 1838 , 363  , 1800 , 35   , 1120 , -109 , -1102, -360 , -989 , -864 , -1326, -1899, -344 , -1341, 232  , -1474, 1123 , -1802, 1388 , 1297 , -795 , 1451 , -1284, -677 , 1261 , -1230, 1885 , -1637, 1268 , 1300 , 1710 , 140  , -1331, 67   , 139  , 947  , -1879, 1268 , -1523, -1114, 488  , 1484 , -426 , -40  , -1163, 1775 , -417 , 1009 , -3   , -1866, -843 , 354  , 383  , 5    , -321 , -1840, -1662, -1938, 1789 , 260  , 1322 , -37  , 466  , -1285, -935 , -1952, -725 , 574  , -1773, -1928, -631 , 1497 , -855 , -311 , -467 , -1034, 2007 , 1936 , 1857 , 460  , 1236 , -1678, -1180, 1499 , -181 , -889 , 1240 , 838  , 2029 , 218  , -1593, 1879 , 974  , -1456, -350 , 1981 , 1263 , -1776, 1829 , -543 , 1188 , -1084, -864 , 504  , 1005 , 1599 , -799 , 1536 , 1847 , 1416 , 1802 , -453 , -1232, -640 , -1283, -1029, -778 , -1311, -979 , 1419 , -1835, -1235, -1007, -1871, -187 , 921  , 2033 , 875  , 899  , -1697, -1273, -577 , 302  , -190 , 1849 , 1354 , 1725 , -1828, 889  , 976  , -2017, 653  , -884 , -581 , -1512, 1925 , 67   , -1   , -1339, -241 , -1683, -478 , 1605 , -1029, 64   , 1556 , 312  , -1811, -1044, 1884 , 426  , -552 , 1813 , -1208, -571 , -1866, 1965 , 821  , -122 , -709 , 253  , 194  , -1202, 1454 , -398 , 772  , -670 , 1880 , 1333 , 1954 , 208  , -594 , 1451 , 2039 , 1136 , -751 , 1079 , -1505, 1698 , -211 , -1018, 1345 , 497  , -1747, -740 , 1558 , 1172 , -452 , -536 , -2019, -1279, 1792 , -1465, 671  , -981 , 1195 , -1556, -281 , -30  , 211  , 365  , -835 , -1444, -253 , 904  , -1018, -1862, 1244 , 1310 , -1267, 1411 , 1510 , -410 , -1975, 663  , -634 , 1978 , -1421, -1053, -1083, -982 , 1390 , 1074 , -1985, -911 , 1905 , -1564, -1139, 1220 , 744  , 642  , 254  , -1657, -551 , -1988, 1255 , 1746 , -867 , 648  , -1711, 1284 , -1293, -554 , -763 , -2046, 2010 , 1639 , 1369 , -296 , 2015 , -986 , 629  , -278 , 2028 , -135 , 709  , 1394 , 53   , -1592, -1316, -1299, 1656 , -858 , 1558 , 1906 , -680 , 106  , -41  , -371 , -147 , 1951 , 1788 , -1569, -1886, -216 , -471 , -1857, 150  , -1853, 670  , -203 , 294  , -1052, -356 , 1181 , 1943 , 1384 , -378 , 980  , 726  , 9    , 97   , 1277 , -1669, 1158 , 1361 , -1245, 1828 , 1409 , 462  , 990  , 518  , -1865, -1738, 425  , 789  , -1329, 1279 , -57  , 1381 , -2029, 831  , -99  , 377  , -658 , -881 , 1762 , 905  , 1185 , 415  , 1553 , 759  , 520  , 6    , 1275 , 527  , -1277, -745 , -1377, 1527 , -749 , 533  , -883 , -1173, 1074 , -833 , 54   , 1685 , 1577 , 260  , 957  , -1199, -686 , -937 , -378 , -1389, -47  , -1350, 1305 , 97   , -1741, -973 , 190  , -131 , 965  , -1369, -1376, 1569 , 558  , -1413, 170  , 734  , -557 , -731 , 1850 , 1442 , -398 , -1797, 152  , -205 , 1145 , 1381 , 1172 , -1975, -416 , -106 , 615  , -1953, -656 , -301 , 447  , 1933 , 1535 , 596  , -211 , -1886, -964 , -1628, -963 , -1378, 245  , 139  , -1482, 6    , -1582, 894  , -536 , 668  , 1471 , -932 , -2017, 1020 , 1463 , -1013, 1263 , -440 , 1083 , 2047 , -1279, -1089, -1164, -1985, -359 , -1004, 714  , 1757 , 868  , -1577, -821 , 429  , 1339 , 843  , -1525, 34   , -955 , -736 , 1140 , 572  , 790  , 871  , -1039, 873  , 1975 , -1559, -150 , 803  , -1404, 371  , 537  , 395  , 1136 , -1136, -51  , -378 , -1619, 1109 , -553 , -1843, 1988 , -1892, 770  , -878 , 922  , -1180, -888 , 163  , -577 , -849 , -1987, 271  , -851 , 441  , -922 , -34  , -1708, -2013, -1133, 350  , -357 , 243  , -959 , -1821, 556  , 1222 , 1520 , -1636, -1940, 937  , -1743, -215 , -1100, -2011, -1554, 1907 , -1042, -2034, -943 , -253 , 1111 , -1152, 1904 , -1672, 715  , 1633 , -467 , 710  , 245  , 974  , 489  , -1447, 50   , -932 , -1945, 1225 , 707  , 1301 , 711  , 800  , 855  , 1414 , -1654, 1994 , 1005 , 189  , 1730 , -419 , 1021 , -566 , -827 , -1202, -1249, 1422 , -669 , -16  , 1182 , -1579, 1118 , -1185, 740  , 460  , 1088 , 325  , 1157 , -2039, 1802 , -320 , -1238, -916 , -736 , 1580 , -1788, -1357, 453  , 1386 , 177  , 536  , 302  , 1428 , 831  , 377  , -2031, -1154, -1721, -1376, -189 , -164 , 1302 , 1383 , -790 , 861  , 322  , 423  , 1018 , 1754 , 1979 , 1482 , 586  , -779 , 1297 , 1387 , -1254, -1041, -1472, 6    , 827  , -1809, 1143 , 746  , -968 , -1489, 315  , 911  , -1431, -293 , -633 , -1611, 1451 , 1232 , -228 , 1552 , -640 , 62   , 894  , -116 , -1395, 1161 , 863  , -1373, -456 , 348  , 617  , -540 , 594  , 1666 , -1433, 1443 , 444  , 1978 , -158 , -1772, 73   , -1601, 742  , 1773 , 1137 , -1078, -1349, -833 , -805 , -1278, -1653, -701 , -1377, 195  , 148  , 1511 , -1637, 1836 , 1938 , -719 , 532  , -136 , -1124, -504 , 473  , -233 , -2028, -624 , 357  , -1539, -1406, 522  , -1312, -1055, 1094 , 1290 , 37   , 1264 , 372  , 1624 , -59  , 91   , -1086, -1913, 1298 , -1011, -347 , 1076 , -1388, -1820, 134  , -1207, -1910, -1011, -530 , -378 , 69   , -472 , -704 , -1397, 283  , -2035, 1996 , -991 , 1266 , 850  , 171  , 840  , -987 , 1727 , 1968 , 160  , 1093 , -244 , -521 , -273 , 859  , -620 , -474 , -620 , -95  , -413 , 1686 , -629 , -724 , -1294, 1118 , 362  , 594  , 2034 , -910 , -1668, -1019, -1695, -527 , -1912, 684  , -420 , -2007, 942  , -1127, 1521 , -1764, 1625 , -989 , 1066 , -2029, -1473, 510  , -141 , 1690 , -1147, -132 , -949 , -14  , 1905 , -1029, 2029 , 283  , 747  , -223 , 1046 , -832 , -1961, -1362, 2023 , 1344 , -2012, -1081, 955  , 1680 , 1626 , 1858 , 815  , -1321, -726 , -1142, -989 , -273 , -1851, 1238 , 1556 , 735  , 1576 , 1671 , 1535 , -1471, 956  , -1480, -1292, -797 , 38   , -1077, -1714, 2021 , 1778 , -518 , -32  , -1437, 1425 , 389  , -1225, 1844 , 1711 , 1097 , 1342 , -1714, 440  , 332  , -278 , 1928 , -1614, 959  , -643 , 555  , -148 , 274  , -1306, -358 , 1428 , 1561 , 399  , -1622, 1899 , 1263 , -1074, -292 , -1350, 1270 , -1051, 1920 , 356  , -1906, -1325, -1469, -310 , -981 , 663  , -482 , 1722 , 1997 , -589 , 1329 , -737 , 983  , 703  , 1702 , -1143, 1318 , 4    , -1868, -538 , 1409 , 1362 , -542 , 312  , 1079 , -1315, -228 , -69  , -987 , 163  , 1280 , -1739, -1779, -1842, -108 , 659  , -990 , 819  , -1170, 440  , -1382, 333  , 1307 , 1299 , 1521 , -1779, -442 , -137 , -353 , 1319 , -631 , -2046, -393 , 281  , 766  , 360  , -1750, 1882 , 1807 , -1122, -1952, -1017, -861 , 1270 , 698  , 1832 , 720  , -392 , 792  , -1384, 28   , 471  , -1520, -1607, -1660, 1403 , 2039 , -123 , 1764 , -234 , 1152 , 1392 , -45  , -493 , 2023 , -2040, 241  , 380  , 758  , -883 , -1021, -1543, 1222 , -1183, -2008, -1247, -194 , -2022, -1688, -1125, -1482, -790 , 28   , 1156 , -311 , -1524, 191  , -291 , -1400, -1120, 657  , -877 , 71   , -347 , 733  , 366  , 1005 , 569  , 1370 , 1444 , 333  , 2016 , -213 , -1759, -2018, 716  , -426 , 95   , 761  , 1110 , -1774, -2035, -854 , 507  , -202 , -1963, 259  , 889  , -1792, -1663, -1576, -1871, 587  , 600  , -488 , 1732 , 1912 , 1729 , -197 , -436 , -1649, -1187, -128 , -1401, -1703, -764 , -607 , -527 , 1635 , -681 , 1051 , -46  , 758  , 257  , -328 , 497  , -1934, -1771, -1388, -474 , 510  , -1926, 515  , -438 , -1555, 129  , -575 , -407 , -1526, 1012 , 1824 , -1109, -1882, 485  , 1366 , 760  , 1793 , -1984, -326 , -1419, 1794 , 603  , 1009 , -1836, -1117, 668  , -1670, -192 , 142  , 1209 , -994 , 1241 , -524 , 790  , 482  , 1080 , -397 , -596 , 879  , 2007 , 1878 , -526 , 325  , -1963, 1210 , 49   , 872  , 143  , -1951, 1994 , 1731 , -944 , 660  , -1316, 1997 , -443 , 1856 , 1409 , 1513 , 1669 , -663 , -1936, 601  , 661  , -729 , 233  , -667 , -1232, 93   , -578 , -1537, 879  , 1816 , 977  , -761 , -771 , 802  , 1266 , -1252, -927 , 1082 , 530  , -1841, -58  , -1733, 1614 , 658  , 2019 , 881  , -770 , -391 , 1582 , -1384, 330  , 1966 , 1789 , 1825 , -404 , -1726, 1089 , -1366, 1039 , -971 , -185 , 1129 , -114 , -242 , 1801 , 1010 , 86   , -174 , 1401 , -2007, -817 , -792 , 2022 , 1016 , 375  , -1424, 1805 , 1285 , 1904 , -1226, 1051 , -543 , -1697, -417 , -1969, 869  , -176 , 1331 , 1846 , 1083 , -918 , -1780, 947  , -1114, -235 , -1296, -982 , -943 , -428 , -1381, -1514, -1136, 1207 , -281 , -694 , 1747 , -384 , -1407, 1038 , -209 , 1206 , 1591 , -1999, -1403, 752  , 1672 , -907 , 1327 , 447  , -579 , 990  , 371  , -222 , 755  , 640  , -1301, 1363 , 1906 , 499  , 109  , -970 , 1080 , 249  , -1507, -1170, -497 , -131 , -1120, -186 , 712  , 1135 , -578 , 1379 , 1790 , -352 , 348  , -905 , 1474 , -1239, -146 , 850  , -1684, -925 , 298  , -810 , 394  , -473 , 1440 , 1460 , -2007, -1556, -1030, 1660 , -551 , 1742 , -1079, -173 , -209 , 1608 , 1191 , -1996, -1647, 57   , -276 , -262 , 433  , 2013 , 1739 , 644  , 576  , 1079 , 1091 , 175  , 1198 , -1740, 762  , 790  , 1383 , -1505, -1569, 138  , 1085 , -1879, 825  , 479  , 598  , -157 , 368  , -142 , -1764, -1003, -21  , 917  , 1002 , -1356, -854 , -1668, 121  , 1742 , 833  , 1985 , 1907 , 1369 , -709 , -1678, 461  , -210 , -21  , -597 , 2032 , 1336 , -1721, -773 , 1834 , 882  , -307 , 529  , -1225, -396 , -1980, -1962, -1271, -623 , -917 , 1149 , 151  , -1549, -1573, -1169, -753 , 1711 , 1023 , -378 , -576 , 979  , -1929, -960 , 1621 , 1944 , 1171 , 1224 , -1376, 198  , 941  , 1806 , -979 , 1248 , -1881, -282 , -1964, 224  , 818  , 1053 , -436 , -1808, -1071, 625  , 704  , -300 , 1090 , 682  , 1666 , 855  , -143 , 83   , -1496, 692  , 994  , -353 , 1581 , 1947 , -1751, -432 , 2030 , -1883, -59  , -691 , 580  , -769 , -641 , -768 , -445 , -1155, -735 , -648 , -1389, 753  , 255  , -1319, -1133, 1587 , -1719, 1925 , -1976, -1575, -684 , 814  , -690 , -848 , -1565, 341  , 1193 , -1321, 1449 , 1273 , 1099 , -595 , 1716 , 1755 , 1901 , -1880, -1408, -172 , -316 , 405  , 1551 , -1077, -444 , 1077 , 243  , 320  , -447 , 698  , -1600, 416  , -1327, -1161, 157  , 818  , 1098 , 1052 , 1006 , -1038, -1627, -353 , 1784 , 797  , -899 , -1714, 1768 , 111  , -548 , 1883 , 1652 , 349  , 245  , -508 , 1874 , -592 , 1192 , -1184, 1925 , -1923, 360  , 1953 , -546 , -1551, -938 , 1880 , -2004, 746  , -1753, -163 , 349  , 938  , -1222, -595 , 908  , 987  , -1369, -500 , -1559, 1640 , 1744 , -11  , -2039, 910  , 1988 , -689 , -67  , 745  , -1220, 1291 , -394 , 574  , -1106, -1213, -315 , -1808, 1340 , -367 , 285  , -877 , -24  , -1847, -327 , -179 , 923  , 1422 , -430 , -1856, 1148 , 303  , -109 , -240 , -830 , -756 , 235  , 1584 , 744  , 202  , 482  , 1965 , 1349 , -310 , -996 , 1454 , -1510, 552  , 751  , -98  , -1524, -1166, 190  , -136 , 736  , 450  , -1526, 1928 , -1585, 1712 , -1557, 1565 , -1906, -983 , 512  , -395 , -1341, 770  , 1912 , -152 , 1637 , 1226 , 1919 , -1849, 372  , -1087, -2026, -1132, -43  , -1034, -1849, -1240, -2038, 1031 , -1988, 1559 , 1196 , 227
